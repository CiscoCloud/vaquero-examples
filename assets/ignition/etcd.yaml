---
networkd:
  units:
    {{ with index .host.interfaces 0}}
    - name: 10-static.network
      contents: |
        [Match]
        MACAddress={{.mac}}
        [Network]
        Gateway={{.subnet.gateway}}
        DNS={{ index .subnet.dns 0 }}
        Address={{ .ipv4 }}
    {{ end }}
{{ if index .env "ssh_authorized_keys" }}
passwd:
  users:
    - name: core
      ssh_authorized_keys:
        {{ range $element := .env.ssh_authorized_keys }}
        - {{$element}}
        {{end}}
{{end}}
